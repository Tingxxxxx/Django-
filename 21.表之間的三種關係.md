# ğŸ“ Django è¡¨ä¹‹é–“çš„ä¸‰ç¨®é—œä¿‚

Django ä¸­æœ‰ä¸‰ç¨®å¸¸è¦‹çš„è³‡æ–™åº«é—œè¯ï¼š**ä¸€å°ä¸€**ï¼ˆ`OneToOneField`ï¼‰ã€**ä¸€å°å¤š**ï¼ˆ`ForeignKey`ï¼‰å’Œ**å¤šå°å¤š**ï¼ˆ`ManyToManyField`ï¼‰ã€‚

---

## 1. ğŸ”— ä¸€å°å¤šï¼ˆ`ForeignKey`ï¼‰

ä¸€å°å¤šé—œä¿‚æ˜¯æŒ‡åœ¨å…©å€‹è³‡æ–™è¡¨ä¸­ï¼Œä¸€å€‹è³‡æ–™è¡¨çš„æ¯ä¸€è¡Œå¯ä»¥èˆ‡å¦ä¸€å€‹è³‡æ–™è¡¨çš„å¤šè¡Œå°æ‡‰ã€‚æœ€å¸¸è¦‹çš„æ–¹å¼æ˜¯ä½¿ç”¨ `ForeignKey`ã€‚

### ç¯„ä¾‹ï¼š
æ¯å€‹ `User` å¯ä»¥ç™¼ä½ˆå¤šç¯‡ `Article`ï¼Œè€Œæ¯ç¯‡ `Article` åªèƒ½å°æ‡‰ä¸€å€‹ `User`ã€‚

```python
from django.db import models

class User(models.Model):
    username = models.CharField(max_length=50)
    password = models.CharField(max_length=100)

class Article(models.Model):
    title = models.CharField(max_length=100)
    content = models.TextField()
    # é€é ForeignKey è¨­ç½®ä¸€å°å¤šé—œä¿‚
    author = models.ForeignKey(User, on_delete=models.CASCADE, related_name='articles')

# ä½¿ç”¨ç¯„ä¾‹
user = User.objects.create(username='alice', password='1234')
article1 = Article.objects.create(title='Django å¤–éµæ•™å­¸', content='å…§å®¹...', author=user)
article2 = Article.objects.create(title='Python é€²éšèª²ç¨‹', content='å…§å®¹...', author=user)

# å–å¾—è©²ä½¿ç”¨è€…çš„æ‰€æœ‰æ–‡ç« 
articles = user.articles.all()  # ä½¿ç”¨åå‘æŸ¥è©¢
for article in articles:
    print(article.title)  # è¼¸å‡ºï¼šDjango å¤–éµæ•™å­¸, Python é€²éšèª²ç¨‹
```


## 2. ğŸ”‘ ä¸€å°ä¸€ï¼ˆOneToOneFieldï¼‰

ä¸€å°ä¸€é—œä¿‚æ˜¯æŒ‡åœ¨å…©å€‹è³‡æ–™è¡¨ä¸­ï¼Œæ¯ä¸€è¡Œè³‡æ–™åœ¨å…¶ä¸­ä¸€å€‹è¡¨ä¸­éƒ½æœ‰å”¯ä¸€å°æ‡‰çš„è³‡æ–™ã€‚

### ç¯„ä¾‹ï¼š
ç”¨æˆ¶è¡¨èˆ‡èˆ‡ç”¨æˆ¶ä¿¡æ¯è¡¨ï¼Œå¦‚ç¶²ç«™ä¸­å°‡ç”¨æˆ¶è³‡æ–™ä¾å¸¸ç”¨/ä¸å¸¸ç”¨ï¼Œæ‹†åˆ†æˆUserè¡¨ èˆ‡UserExtensionè¡¨

```python

from django.db import models
# ä½¿ç”¨è€…æ¨¡å‹
class User(models.Model):
    username = models.CharField(max_length=50)
    password = models.CharField(max_length=100)

# ä½¿ç”¨è€…è©³ç´°è³‡æ–™æ¨¡å‹
class UserExtension(models.Model):
    birthday = models.DateField()
    school = models.CharField(max_length=100)
    # é€é OneToOneField è¨­ç½®ä¸€å°ä¸€é—œä¿‚
    user = models.OneToOneField("User", on_delete=models.CASCADE)

# ä½¿ç”¨ç¯„ä¾‹
user = User.objects.create(username='sophie', password='abcde')
user_info = UserExtension.objects.create(user=user, birthday='1995-07-30', school='é«˜å•†')  # è¨˜å¾—æŒ‡å®š user é—œè¯

# 1ï¸âƒ£ æ­£å‘æŸ¥è©¢:å¾ï¼ˆå¾ UserExtension æŸ¥ Userï¼‰
user_name = user_info.user.username # çµæœ:sophie

# 2ï¸âƒ£ åå‘æŸ¥è©¢ï¼ˆå¾ User æŸ¥ UserExtensionï¼‰
user = User.objects.get(username='sophie') #
birthday = user.userextension.birthday  # åå‘æŸ¥è©¢ UserExtension çš„ birthday çµæœ:1995-07-30
```

## 3. ğŸ”— å¤šå°å¤šï¼ˆManyToManyFieldï¼‰

å¤šå°å¤šé—œä¿‚è¡¨ç¤ºå…©å€‹è³‡æ–™è¡¨ä¹‹é–“ï¼Œæ¯ç­†è³‡æ–™éƒ½å¯ä»¥èˆ‡å¦ä¸€å€‹è¡¨çš„å¤šç­†è³‡æ–™å»ºç«‹é—œè¯ï¼Œå¸¸è¦‹æ–¼æ¨™ç±¤ç³»çµ±ã€èª²ç¨‹é¸ä¿®ç­‰å ´æ™¯ã€‚

### ç¯„ä¾‹ï¼š
æ–‡ç«  Article å¯ä»¥æœ‰å¤šå€‹æ¨™ç±¤ Tagï¼Œä¸€å€‹æ¨™ç±¤ä¹Ÿå¯ä»¥è¢«å¤šç¯‡æ–‡ç« ä½¿ç”¨ã€‚

```python
from django.db import models

class Tag(models.Model):
    name = models.CharField(max_length=50)

class Article(models.Model):
    title = models.CharField(max_length=100)
    content = models.TextField()
    # é€é ManyToManyField è¨­ç½®å¤šå°å¤šé—œä¿‚
    tags = models.ManyToManyField(Tag, related_name='articles')  # å¤šå°å¤šé—œè¯

# ä½¿ç”¨ç¯„ä¾‹
tag_python = Tag.objects.create(name='Python')
tag_django = Tag.objects.create(name='Django')

article = Article.objects.create(title='å­¸ç¿’ Django', content='Django æ˜¯å€‹å¼·å¤§çš„æ¡†æ¶ã€‚')
article.tags.add(tag_python, tag_django)  # åŒæ™‚é—œè¯å¤šå€‹æ¨™ç±¤

# æ­£å‘æŸ¥è©¢ï¼šå¾ Article æŸ¥ Tag
for tag in article.tags.all():
    print(tag.name)  # è¼¸å‡ºï¼šPython, Django

# åå‘æŸ¥è©¢ï¼šå¾ Tag æŸ¥ Article
for art in tag_python.articles.all():
    print(art.title)  # è¼¸å‡ºï¼šå­¸ç¿’ Django
```