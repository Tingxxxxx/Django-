# ğŸ“Œ Django REST Frameworkï¼ˆDRFï¼‰ç­†è¨˜

## 1. å®‰è£ DRF ä¸¦å»ºç«‹ Django API å°ˆæ¡ˆ

### å»ºç«‹è™›æ“¬ç’°å¢ƒï¼ˆå»ºè­°ä½¿ç”¨ venv ä¾†éš”é›¢ç’°å¢ƒï¼‰ï¼š
```sh
python -m venv venv
source venv/bin/activate  # Windows ç”¨æˆ¶è«‹åŸ·è¡Œ venv\Scripts\activate
```

### å®‰è£ Django åŠ DRFæ¡†æ¶ç›¸é—œä¾è³´ï¼š
##### **æ–¹å¼1:åŸ·è¡Œä»¥ä¸‹å‘½ä»¤**
```sh
pip install django djangorestframework

é€™æ¢å‘½ä»¤åªæœƒå®‰è£ä»¥ä¸‹åŸºç¤å…§å®¹ï¼š
Djangoï¼šå®‰è£ Django Web æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½ï¼Œç”¨æ–¼æ§‹å»ºå’Œç®¡ç† Web æ‡‰ç”¨ç¨‹åºã€‚
Django REST Framework (DRF)ï¼šå®‰è£ DRFï¼Œé€™æ˜¯ä¸€å€‹å¼·å¤§çš„å·¥å…·ï¼Œç”¨æ–¼å¿«é€Ÿé–‹ç™¼ APIã€‚
å®ƒç‚º Django æä¾›äº†é¡å¤–çš„åŠŸèƒ½ä¾†è™•ç† RESTful APIï¼Œä¸¦ä¸”åŒ…æ‹¬äº†è¦–åœ–ã€åºåˆ—åŒ–å™¨ã€èªè­‰ã€æˆæ¬Šç­‰åŠŸèƒ½ã€‚
```


##### **æ–¹å¼2(æ¨è–¦):ä½¿ç”¨`requirements.txt` å¿«é€Ÿå®‰è£ä¾è³´ã€æ“´å±•åŠŸèƒ½æˆ–åº«**

- **å‰µå»ºä¸¦ä½¿ç”¨ `requirements.txt` ä¾†å®‰è£ä¾è³´:**
    ```sh

    # åœ¨è™›æ“¬ç’°å¢ƒä¸­å®‰è£å®Œ Django å’Œ DRF å¾Œï¼Œç”Ÿæˆ requirements.txt æ–‡ä»¶
    # é€™æœƒå°‡ç•¶å‰è™›æ“¬ç’°å¢ƒä¸­å®‰è£çš„æ‰€æœ‰åº«å’Œç‰ˆæœ¬è¨˜éŒ„åˆ° requirements.txt æ–‡ä»¶ä¸­ã€‚
    pip freeze > requirements.

    ```
- **ä½¿ç”¨ `requirements.txt` å®‰è£ä¾è³´ï¼š**
```sh
    # å¦‚æœæœ‰ä¸€å€‹æ–°çš„é–‹ç™¼ç’°å¢ƒï¼Œä¸¦ä¸”å¸Œæœ›å¿«é€Ÿå®‰è£ä¾è³´ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
    # é€™æœƒæ ¹æ“š requirements.txt æ–‡ä»¶ä¸­çš„å…§å®¹ï¼Œå®‰è£æ‰€æœ‰æ‰€éœ€çš„åº«ã€‚
    pip install -r requirements.txt
```
- **æ›´æ–° `requirements.txt`ï¼ˆå¦‚æœå®‰è£äº†å…¶ä»–ä¾è³´ï¼‰:**
```sh
    # å¦‚æœåœ¨é–‹ç™¼éç¨‹ä¸­å®‰è£äº†å…¶ä»–æ–°çš„ä¾è³´ï¼ˆä¾‹å¦‚ï¼šdjango-guardian æˆ– django-filterï¼‰ï¼Œè¨˜å¾—åœ¨å®‰è£å®Œå¾Œæ›´æ–° requirements.txt
    pip freeze > requirements.txt
```
- **`requirements.txt` ç¯„ä¾‹(åŸºæœ¬æ¶µè“‹å¤§å¤šæ•¸API é–‹ç™¼æ‰€éœ€ä¾è³´):**

    ```r
    asgiref==3.2.7
    certifi==2020.4.5.1
    chardet==3.0.4
    coreapi==2.3.3
    coreschema==0.0.4
    Django==3.0.6
    django-filter==2.2.0
    djangorestframework==3.11.0
    idna==2.9
    importlib-metadata==1.6.0
    itypes==1.2.0
    Jinja2==2.11.2
    Markdown==3.2.2
    MarkupSafe==1.1.1
    Pygments==2.6.1
    pytz==2020.1
    requests==2.23.0
    sqlparse==0.3.1
    uritemplate==3.0.1
    urllib3==1.25.9
    zipp==3.1.0
    django-guardian>=1.0.0
    ```

    **ç°¡å–®è§£é‡‹æ¯å€‹ä¾è³´çš„åŠŸèƒ½ï¼š**
    Djangoï¼šDjango æ¡†æ¶æœ¬èº«ï¼Œç”¨æ–¼è™•ç†åŸºæœ¬çš„ Web æ‡‰ç”¨é–‹ç™¼ã€‚
    djangorestframeworkï¼šDRF ä¸»è¦æ¡†æ¶ï¼Œæä¾›ç°¡å–®çš„æ–¹æ³•ä¾†å‰µå»º RESTful APIã€‚
    django-filterï¼šç”¨æ–¼æä¾›åŸºæ–¼æŸ¥è©¢åƒæ•¸çš„éæ¿¾åŠŸèƒ½ï¼Œç°¡åŒ–ç¯©é¸æ“ä½œã€‚
    django-guardianï¼šç”¨æ–¼ç´°ç²’åº¦æ¬Šé™æ§åˆ¶ï¼Œå¯ä»¥åœ¨å°è±¡ç´šåˆ¥é€²è¡Œæ¬Šé™æ§åˆ¶ã€‚
    asgirefã€certifiã€chardetã€idnaã€urllib3ã€requestsï¼šé€™äº›æ˜¯ DRF å’Œ Django ä»¥åŠ HTTP è«‹æ±‚å’Œå›æ‡‰æ‰€ä¾è³´çš„åº•å±¤åº«ï¼Œç”¨æ–¼è™•ç† HTTP è«‹æ±‚ã€TLS/SSL å®‰å…¨é€šä¿¡ç­‰ã€‚
    coreapiã€coreschemaï¼šé€™äº›æ˜¯ DRF ä½¿ç”¨çš„ API æè¿°å·¥å…·ï¼Œç”¨ä¾†æè¿° API çš„çµæ§‹å’Œæ¥å£ã€‚
    sqlparseï¼šSQL æŸ¥è©¢èªå¥è§£æå™¨ï¼ŒDjango æœƒç”¨å®ƒä¾†æ ¼å¼åŒ– SQL æŸ¥è©¢ã€‚
    pytzï¼šç”¨æ–¼è™•ç†æ™‚å€ï¼ŒDjango åœ¨è™•ç†æ—¥æœŸå’Œæ™‚é–“æ™‚æœƒç”¨åˆ°å®ƒã€‚
    importlib-metadataã€itypesã€Jinja2ã€Markdownã€MarkupSafeã€Pygmentsã€zipp
```

```




#### å»ºç«‹ Django å°ˆæ¡ˆï¼ˆå‡è¨­å°ˆæ¡ˆåç¨±ç‚º myapiï¼‰ï¼š
```sh
django-admin startproject myapi
cd myapi
```

#### å»ºç«‹ Django å­æ‡‰ç”¨ï¼ˆä¾‹å¦‚ appï¼‰ï¼š
```sh
python manage.py startapp app
```
---



## 2. é…ç½® `INSTALLED_APPS` åŠ `urls.py`

#### åœ¨å°ˆæ¡ˆä¸‹çš„ `settings.py` ä¸­åŠ å…¥ `rest_framework`ï¼š
```sh
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    
    # æ–°å¢ DRF
    'rest_framework',
    
    # æ–°å¢è‡ªè¨‚æ‡‰ç”¨ç¨‹å¼
    'app',
]
```
#### ä¿®æ”¹å°ˆæ¡ˆä¸‹çš„ `urls.py` è¨­ç½® API è·¯ç”±ï¼š
```sh
# åœ¨ myapi/urls.py ä¸­ï¼ŒåŠ å…¥ï¼š
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/', include('app.urls')),  # å°‡ API è·¯ç”±å°å‘ `app.urls`
]
```
####ã€€åœ¨å­æ‡‰ç”¨ `app/urls.py` ä¸­é…ç½® API ç«¯é»ï¼ˆå¦‚æœæª”æ¡ˆä¸å­˜åœ¨ï¼Œè«‹è‡ªè¡Œå»ºç«‹ï¼‰ï¼š
```sh
from django.urls import path
from app import views

urlpatterns = [
    path('hello/', views.hello_api),  # API è·¯å¾‘ç¯„ä¾‹
]

```
####ã€€å»ºç«‹ä¸€å€‹ç°¡å–®çš„ API Viewï¼š
```sh
# åœ¨ app/views.py ä¸­ï¼ŒåŠ å…¥ï¼š
from django.http import JsonResponse

def hello_api(request):
    return JsonResponse({'message': 'Hello, DRF!'})
```

#### å•Ÿå‹•ä¼ºæœå™¨ä¸¦æ¸¬è©¦ APIï¼š
```sh
# å•Ÿå‹•ä¼ºæœå™¨
python manage.py runserver
```

```json
{"message": "Hello, DRF!"}  //# åœ¨ç€è¦½å™¨ä¸­æ‰“é–‹ http://127.0.0.1:8000/api/hello/ï¼Œè¿”å›çš„çµæœ



```

ç¸½çµï¼š
å‰µå»º Django å°ˆæ¡ˆ
å‰µå»ºè™›æ“¬ç’°å¢ƒä¸¦å•Ÿå‹•
å®‰è£ requirements.txt ä¸­çš„ä¾è³´
å‰µå»º Django å­æ‡‰ç”¨ä¸¦é…ç½®è·¯ç”±
é–‹ç™¼ API è¦–åœ–å’Œåºåˆ—åŒ–å™¨
æ¸¬è©¦ API